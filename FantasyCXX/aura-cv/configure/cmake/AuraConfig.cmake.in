# ===================================================================================
#  The Aura CMake configuration file
#
#             ** File generated automatically, do not modify **
#
#  Usage from an external project:
#    In your CMakeLists.txt, add these lines:
#
#    find_package(Aura REQUIRED)
#    include_directories(${AURA_INCLUDE_DIRS}) # Not needed for CMake >= 2.8.11
#    target_link_libraries(YOUR_TARGET_NAME ${AURA_LIBS})
#
#    If aura is found then AURA_FOUND is set to TRUE.
#
#    This file will define the following variables:
#      - AURA_LIBS                     : The list of all imported targets for Aura modules.
#      - AURA_INCLUDE_DIRS             : The Aura include directories.
#
#    Advanced variables:
#      - AURA_ANDROID_ABI              : Aura android abi, reserve
#      - AURA_ANDROID_PLATFORM         : Aura android platrorm, reserve
#      - AURA_ENABLE_ARM82             : Aura enable ARMv8.2 support
#      - AURA_ENABLE_OPENCL            : Aura enable OpenCL support
#      - AURA_SHARED_LIBRARY           : Use Aura as shared library
#      - AURA_INSTALL_PATH             : Aura location
#      - AURA_BUILD_XPLORER            : Aura build xplorer
#      - AURA_BUILD_XTENSA             : Aura build xtensa
#
# ===================================================================================

set(AURA_ANDROID_ABI @ANDROID_ABI@)
set(AURA_ANDROID_PLATFORM @ANDROID_PLATFORM@)
set(AURA_ENABLE_ARM82 @AURA_ENABLE_ARM82@)
set(AURA_ENABLE_OPENCL @AURA_ENABLE_OPENCL@)
set(AURA_SHARED_LIBRARY @AURA_SHARED_LIBRARY@)
set(AURA_BUILD_XTENSA @AURA_BUILD_XTENSA@)
set(AURA_BUILD_XPLORER @AURA_BUILD_XPLORER@)

get_filename_component(AURA_INSTALL_PATH "${CMAKE_CURRENT_LIST_DIR}/../" REALPATH)

set(AURA_INCLUDE_DIRS ${AURA_INSTALL_PATH}/include)
if(NOT EXISTS "${AURA_INCLUDE_DIRS}")
    message(FATAL_ERROR "Aura: Include directory doesn't exist: '${AURA_INCLUDE_DIRS}'. Aura installation may be broken.")
endif()
include_directories(BEFORE ${AURA_INSTALL_PATH}/include)
link_directories(BEFORE ${AURA_INSTALL_PATH}/lib)
set(AURA_LIBS @AURA_LIB_NAME@)

if(${CMAKE_SYSTEM_NAME} MATCHES "Android")
    set(AURA_LIBS ${AURA_LIBS} log)
endif()

if(AURA_ENABLE_OPENCL)
    include_directories(BEFORE ${AURA_INSTALL_PATH}/include/3rdparty/opencl)
    if(AURA_SHARED_LIBRARY)
        set(AURA_LIBS ${AURA_LIBS} AURA_opencl_library)
    endif()
endif()

if(${AURA_ENABLE_ARM82})
    if(${CMAKE_SYSTEM_PROCESSOR} MATCHES "aarch64")
        add_compile_options(-march=armv8.2a+fp16)
    endif()
endif()

if(AURA_BUILD_XTENSA)
    include_directories(BEFORE ${AURA_INSTALL_PATH}/include/3rdparty/tile_manager)
    include_directories(BEFORE ${AURA_INSTALL_PATH}/include/3rdparty/runtime)

    set(AURA_XTENSA_LSP_DIRS ${AURA_INSTALL_PATH}/include/3rdparty/lsp)
    list(APPEND AURA_LINK_OPTIONS "-Wl,--shared-pagesize=128;-Wl,-pie;-mlsp=${AURA_XTENSA_LSP_DIRS}")
    add_link_options(${AURA_LINK_OPTIONS})
endif()

if(AURA_BUILD_XPLORER)
    include_directories(BEFORE ${AURA_INSTALL_PATH}/include/3rdparty/tile_manager)
    include_directories(BEFORE ${AURA_INSTALL_PATH}/include/3rdparty/runtime)

    set(AURA_XTENSA_LSP_DIRS ${AURA_INSTALL_PATH}/include/3rdparty/lsp)
    list(APPEND AURA_LINK_OPTIONS "-lxmem-bank-xtos;-lxmem-xtos;-lidma-xtos;-mlsp=${AURA_XTENSA_LSP_DIRS}")
    add_link_options(${AURA_LINK_OPTIONS})
endif()